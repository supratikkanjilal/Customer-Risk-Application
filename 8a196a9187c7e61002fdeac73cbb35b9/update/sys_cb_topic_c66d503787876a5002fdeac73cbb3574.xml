<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_topic">
    <sys_cb_topic action="INSERT_OR_UPDATE">
        <applicability/>
        <applicability_mode>query</applicability_mode>
        <autopilot_topic>false</autopilot_topic>
        <category/>
        <channels/>
        <connect_queue/>
        <context_profiles/>
        <description>Helps users discover available payment offers based on their profile or request.</description>
        <dialog_acts_enabled>false</dialog_acts_enabled>
        <expose_on_palette>false</expose_on_palette>
        <flexible_conversation_switching>false</flexible_conversation_switching>
        <foundational>false</foundational>
        <graph>{
  "graph_api_version": "1.0.73",
  "goals": {
    "primary": {
      "id": "primary",
      "trigger": {
        "type": "primary"
      },
      "name": "primary",
      "applicability": "",
      "description": "",
      "nodes": {
        "01e187c8fecc4e69b12b74223341cef7": {
          "id": "01e187c8fecc4e69b12b74223341cef7",
          "stepType": "Start",
          "name": "Start",
          "greetingResponse": {
            "value": [
              {
                "type": "paragraph",
                "children": [
                  {
                    "text": "Hi!"
                  }
                ]
              },
              {
                "type": "paragraph",
                "children": [
                  {
                    "text": "Welcome to Payment Offers."
                  }
                ]
              }
            ],
            "mode": "simple"
          }
        },
        "339ff2bbaf26411c99125e25bbb698cd": {
          "id": "339ff2bbaf26411c99125e25bbb698cd",
          "stepType": "TerminateGoal",
          "name": "End",
          "confirmationMessage": {
            "value": [
              {
                "type": "paragraph",
                "children": [
                  {
                    "text": ""
                  }
                ]
              }
            ],
            "mode": "simple"
          }
        },
        "98a55eb3ca4f416c914596ea99ed709a": {
          "id": "98a55eb3ca4f416c914596ea99ed709a",
          "stepType": "TextPrompt",
          "name": "Customer Input",
          "prompt": {
            "value": [
              {
                "type": "paragraph",
                "children": [
                  {
                    "text": "Please enter the customer ID"
                  }
                ]
              }
            ],
            "mode": "simple"
          },
          "confirmMessage": {
            "value": "",
            "mode": "simple"
          },
          "acknowledgeMsg": {
            "value": "",
            "mode": "simple"
          },
          "applicability": {
            "value": "",
            "mode": "query"
          },
          "skippable": {
            "value": "",
            "mode": "query"
          },
          "skipReprompt": {
            "value": "",
            "mode": "query"
          },
          "defaultValue": {
            "value": [
              {
                "type": "paragraph",
                "children": [
                  {
                    "text": ""
                  }
                ]
              }
            ],
            "mode": "simple"
          },
          "withNluUserInput": false,
          "skipIfFulfilled": false,
          "variableId": "fed1ead3a7194235b4565e7c96d3ea54",
          "detailDescription": "",
          "inputType": {
            "format": "Text",
            "script": ""
          },
          "requestFeedback": true
        },
        "4c6a094bd9ec4a07b7757089778172d1": {
          "id": "4c6a094bd9ec4a07b7757089778172d1",
          "stepType": "TextOutput",
          "name": "Bot Response",
          "secure": false,
          "value": [
            {
              "value": [
                {
                  "type": "paragraph",
                  "children": [
                    {
                      "text": "Here are the details for "
                    },
                    {
                      "type": "datapill",
                      "dataPill": {
                        "value": "{{vaInputs.customer_input}}",
                        "displayValue": "Input Variablesâž›Customer Input"
                      },
                      "children": [
                        {
                          "text": ""
                        }
                      ]
                    },
                    {
                      "text": ": "
                    }
                  ]
                }
              ],
              "mode": "simple",
              "_key": "116889f5c3db45ee833447299b50599f"
            }
          ],
          "requestFeedback": true,
          "applicability": {
            "value": "",
            "mode": "query"
          }
        },
        "47fe11228a02430ba012ec60aa17188c": {
          "id": "47fe11228a02430ba012ec60aa17188c",
          "stepType": "RecordOutput",
          "name": "Display Cards",
          "variableId": "",
          "cardTemplate": "General",
          "cardFields": {},
          "mode": "script",
          "tableName": "x_cpszo_spoke_offer_tracker",
          "fields": [
            "number",
            "sys_id",
            "offer_type",
            "installment_amount",
            "delinquency_status"
          ],
          "cardDefinition": {
            "name": "Record",
            "value": "General"
          },
          "requestFeedback": true,
          "applicability": {
            "value": "",
            "mode": "query"
          },
          "condition": {
            "mode": "glide_query",
            "value": "number={{vaInputs.customer_input}}^ORnumberLIKE{{vaInputs.customer_input}}"
          }
        },
        "1c9e34b578dc4806991e6a7319914041": {
          "name": "Offer Choice1",
          "prompt": {
            "value": [
              {
                "type": "paragraph",
                "children": [
                  {
                    "text": "Click on the offer card above for accepting the offer."
                  }
                ]
              }
            ],
            "mode": "simple"
          },
          "confirmMessage": {
            "value": "",
            "mode": "simple"
          },
          "acknowledgeMsg": {
            "value": "",
            "mode": "simple"
          },
          "applicability": {
            "value": "",
            "mode": "query"
          },
          "skippable": {
            "value": "",
            "mode": "query"
          },
          "skipReprompt": {
            "value": "",
            "mode": "query"
          },
          "defaultValue": {
            "value": "",
            "mode": "simple"
          },
          "variableId": "e3de050d6e104a89b6dd867367989d76",
          "detailDescription": "",
          "id": "1c9e34b578dc4806991e6a7319914041",
          "stepType": "ChoicePrompt",
          "hasCardHeader": false,
          "cardMetadata": {
            "mode": "card",
            "metadataScript": "",
            "cardTemplate": "",
            "cardFields": {},
            "cardDefinition": {}
          },
          "withNluUserInput": false,
          "skipIfFulfilled": false
        },
        "35645cf0590a45cdb10d7eb8dca657f5": {
          "id": "35645cf0590a45cdb10d7eb8dca657f5",
          "stepType": "RecordOutput",
          "name": "Offer Status",
          "variableId": "",
          "cardTemplate": "General",
          "cardFields": {},
          "mode": "script",
          "tableName": "x_cpszo_spoke_offer_tracker",
          "fields": [
            "number",
            "sys_id",
            "acceptance_date",
            "offer_status"
          ],
          "cardDefinition": {
            "name": "Record",
            "value": "General"
          },
          "requestFeedback": true,
          "applicability": {
            "value": "",
            "mode": "query"
          },
          "condition": {
            "mode": "glide_query",
            "value": "number={{vaInputs.customer_input}}^ORnumberLIKE{{vaInputs.customer_input}}"
          }
        },
        "f1e29d8d68fc4fc39ae0022aace78afb": {
          "id": "f1e29d8d68fc4fc39ae0022aace78afb",
          "stepType": "ScriptOutput",
          "name": "VA_GetOffers",
          "output_type": "single_part",
          "script": "// (function execute() {\n//     var cust = vaInputs.customer_Input || '';\n//     var result = [];\n\n//     if (!cust) {\n//         vaVars.offers = [];\n//         return;\n//     }\n\n//     var gr = new GlideRecord('x_cpszo_spoke_offer_tracker');\n//     gr.addQuery('number', cust);\n//     gr.query();\n\n//     while (gr.hasNext()) {\n//         gr.next();\n//         result.push({\n//             sys_id: gr.sys_id.toString(),\n//             customer_id: gr.number.toString(),\n//             offer_type: gr.offer_type.toString(),\n//             installment: gr.installment_amount.toString(),\n//             delinquency: gr.delinquency_status.toString()\n//         });\n//     }\n\n//     vaVars.offers = result;\n// })();\n(() =&gt; {\n    const cust = inputs.customer_Input || '';\n    const result = [];\n \n    if (!cust) {\n        outputs.offers = [];\n        return;\n    }\n \n    const gr = new GlideRecord('x_cpszo_spoke_offer_tracker');\n    gr.addQuery('number', cust);\n    gr.query();\n \nwhile (gr.next()) {\n        result.push({\n            sys_id: gr.sys_id.toString(),\n            customer_id: gr.number.toString(),\n            offer_type: gr.offer_type.toString(),\n            installment: gr.installment_amount.toString(),\n            delinquency: gr.delinquency_status.toString(),\n        });\n    }\n \n    outputs.offers = result;\n})();",
          "applicability": {
            "value": "",
            "mode": "query"
          }
        },
        "0a7819400b21458f9667f0f911707ca2": {
          "id": "0a7819400b21458f9667f0f911707ca2",
          "name": "Accept Offer Script",
          "script": "(function execute() {\n    var updated = false;\n    var customerId = vaInputs.customer_Input;\n    var userChoice = vaInputs.offer_choice1;\n\n    if (userChoice == 'Yes') {\n        var gr = new GlideRecord('x_cpszo_spoke_offer_tracker');\n        gr.addQuery('number', customerId); // Match by customer ID\n        gr.query();\n\n        while (gr.next()) {\n            var acceptanceDate = new GlideDateTime();\n            gr.acceptance_date = acceptanceDate;\n            gr.offer_status = 'Accepted';\n            gr.update();\n\n            updated = true;\n        }\n    }\n\n    vaVars.confirmation = updated\n        ? 'Offer accepted successfully'\n        : 'No offer was updated';\n\n    vaVars.offer_status = updated ? 'Accepted' : 'Not Updated';\n    vaVars.acceptance_date = updated ? acceptanceDate.getDisplayValue() : '';\n    vaVars.number = customerId;\n    vaVars.success = updated;\n})();\n",
          "stepType": "ScriptAction",
          "applicability": {
            "value": "",
            "mode": "query"
          }
        }
      },
      "edges": [
        {
          "id": "91f28036542145008c1bae7ccfeef2af",
          "edgeType": "Edge",
          "source": "4c6a094bd9ec4a07b7757089778172d1",
          "target": "f1e29d8d68fc4fc39ae0022aace78afb",
          "sourcePort": "",
          "targetPort": ""
        },
        {
          "id": "83e0dfdf297c4f898048ce1a903d96dc",
          "edgeType": "Edge",
          "source": "01e187c8fecc4e69b12b74223341cef7",
          "target": "98a55eb3ca4f416c914596ea99ed709a",
          "sourcePort": "",
          "targetPort": ""
        },
        {
          "id": "92f07e5d1cd74c89b808196f28526444",
          "edgeType": "Edge",
          "source": "98a55eb3ca4f416c914596ea99ed709a",
          "target": "4c6a094bd9ec4a07b7757089778172d1",
          "sourcePort": "",
          "targetPort": ""
        },
        {
          "id": "13a94d052a074ad1948ee20e96b95952",
          "edgeType": "Edge",
          "source": "47fe11228a02430ba012ec60aa17188c",
          "target": "1c9e34b578dc4806991e6a7319914041",
          "sourcePort": "",
          "targetPort": ""
        },
        {
          "id": "78163bdf5d2447fcb0b880b6c191c4dd",
          "edgeType": "Edge",
          "source": "35645cf0590a45cdb10d7eb8dca657f5",
          "target": "339ff2bbaf26411c99125e25bbb698cd",
          "sourcePort": "",
          "targetPort": ""
        },
        {
          "id": "b8adf6a9b05e402584238633613fe9cb",
          "edgeType": "Edge",
          "source": "f1e29d8d68fc4fc39ae0022aace78afb",
          "target": "47fe11228a02430ba012ec60aa17188c",
          "sourcePort": "",
          "targetPort": ""
        },
        {
          "id": "3870b1f65e874621adc3ef239ec157f0",
          "edgeType": "Edge",
          "source": "1c9e34b578dc4806991e6a7319914041",
          "target": "0a7819400b21458f9667f0f911707ca2",
          "sourcePort": "",
          "targetPort": ""
        },
        {
          "id": "9983c6e9d4f94c5cb9bb426aea7bee45",
          "edgeType": "Edge",
          "source": "0a7819400b21458f9667f0f911707ca2",
          "target": "35645cf0590a45cdb10d7eb8dca657f5",
          "sourcePort": "",
          "targetPort": ""
        }
      ]
    }
  },
  "variables": {
    "current-user": {
      "category": "vaInputs",
      "id": "current-user",
      "label": "User",
      "name": "user",
      "table": "sys_user",
      "varType": "reference"
    },
    "fed1ead3a7194235b4565e7c96d3ea54": {
      "id": "fed1ead3a7194235b4565e7c96d3ea54",
      "name": "customer_input",
      "label": "Customer Input",
      "varType": "string",
      "secure": false,
      "category": "vaInputs",
      "encryptionHashFunction": "SHA-256",
      "encryptionSalt": {
        "value": "MTc1NTA2MTYzMjg1MiBWQSBEZXNpZ25lciBpcyBhd2Vzb21l",
        "mode": "simple"
      },
      "nodeId": "98a55eb3ca4f416c914596ea99ed709a",
      "isHidden": false
    },
    "e3de050d6e104a89b6dd867367989d76": {
      "id": "e3de050d6e104a89b6dd867367989d76",
      "name": "offer_choice1",
      "label": "Offer Choice1",
      "varType": "choice",
      "choices": [
        {
          "label": "Done",
          "value": "Done"
        },
        {
          "label": "Not Done",
          "value": "Not Done",
          "checked": true,
          "meta": {}
        }
      ],
      "category": "vaInputs",
      "nodeId": "1c9e34b578dc4806991e6a7319914041",
      "isHidden": false
    }
  }
}</graph>
        <key_phrases>Suggest Payment Offer,Need help with payment,Show payment options,Suggest a payment plan,payment offers,show offers,offer for payment</key_phrases>
        <library>false</library>
        <live_agent>false</live_agent>
        <model_type>nlu_keyword</model_type>
        <modify_confirmation_enabled>false</modify_confirmation_enabled>
        <name>Suggest Payment Offer</name>
        <nlu_intent/>
        <nlu_intent_label/>
        <nlu_model/>
        <nlu_model_label/>
        <nlu_provider/>
        <palette_label/>
        <roles/>
        <root_topic_id/>
        <secure_custom_input_control>false</secure_custom_input_control>
        <source_topic_id/>
        <sys_class_name>sys_cb_topic</sys_class_name>
        <sys_created_by>brijesh.banerjee</sys_created_by>
        <sys_created_on>2025-08-05 17:44:03</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>c66d503787876a5002fdeac73cbb3574</sys_id>
        <sys_mod_count>77</sys_mod_count>
        <sys_name>Suggest Payment Offer</sys_name>
        <sys_package display_value="Spoke" source="x_cpszo_spoke">8a196a9187c7e61002fdeac73cbb35b9</sys_package>
        <sys_policy/>
        <sys_scope display_value="Spoke">8a196a9187c7e61002fdeac73cbb35b9</sys_scope>
        <sys_update_name>sys_cb_topic_c66d503787876a5002fdeac73cbb3574</sys_update_name>
        <sys_updated_by>brijesh.banerjee</sys_updated_by>
        <sys_updated_on>2025-08-25 04:44:10</sys_updated_on>
        <title>Suggest Payment Offer</title>
        <triggerable_by_notification>false</triggerable_by_notification>
        <type>STANDARD</type>
        <variables/>
    </sys_cb_topic>
    <sys_translated_text action="delete_multiple" query="documentkey=c66d503787876a5002fdeac73cbb3574"/>
    <sys_variable_value action="delete_multiple" query="document_key=c66d503787876a5002fdeac73cbb3574"/>
</record_update>
